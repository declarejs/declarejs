declarejs=function(){var q=!0,w=!1,F=!1,B={},R={string:1,number:1,"boolean":1},t={},C={},D={},G={},v={},u=[],H={},N=function(a,b){if(void 0===b)return configs[a];switch(a){case "debug":q=!!q;break;case "userules":w=!!w;break;default:if("object"===typeof a)for(var c in a)N(c,a[c])}},S=function(){if(q)debugger},O=function(){},T=function(a,b){return function(){n("abstractMethod",a+"::"+b+"()")}},p=function(a,b){if(v[b])return v[b](a);if("function"===typeof b)return a instanceof b?a:void 0;if(window[b])return v[b]=
function(a){if(a instanceof window[b])return a},a instanceof window[b]?a:void 0;x(b)},J=function(a,b){var c=I(a);switch(b.length){case 0:return new c;case 1:return new c(b[1]);case 2:return new c(b[1],b[2]);case 3:return new c(b[1],b[2],b[3]);case 4:return new c(b[1],b[2],b[3],b[4]);default:return new c(b[1],b[2],b[3],b[4],b[5])}},P=function(){if(u.length&&!F){F=!0;for(var a=0;a<u.length;a++)y(u[a]);u=[];F=!1}},I=function(a){C[a]||y(a);return C[a]||window[a]||y(a).c},K=function(a,b,c){for(var d=a.split(" "),
e=d.pop(),f=typeof b,g=c.c,h=c.parent?c.parent.members[e]:!1,l=c.members,k={name:e,key:e,header:a,access:"public",type:!1,ismethod:"function"===f},m=0;m<d.length;m++){var r=B[d[m]]||d[m];switch(r){case "static":k[r]=!0;break;case "protected":case "private":case "public":k.access=r;break;case "abstract":f="function";k.ismethod=!0;k[r]=!0;void 0===h[r]&&(b=T(c.name,e));break;case "all":case "get":if(l["get_"+e]||K("get_"+e,function(){return this[k.key]},c),"get"===r)break;case "set":l["set_"+e]||K("set_"+
e,function(a){this[k.key]=p(a,k.type);return this},c);break;default:r.length&&(k.type=r)}}h?(k.key=h.key,k.access!==h.access&&z("access",a),"private"===h.access&&n("privateMember",a),h["final"]&&n("finalMember",a),(k.ismethod&&!h.ismethod||!k.ismethod&&h.ismethod)&&z("type",a),(k["static"]&&!h["static"]||!k["static"]&&h["static"])&&z("static",a),k.type||(k.type=h.type)):("public"!==k.access&&(k.key=h?h.key:q?e+"("+k.access.toUpperCase()+")":Math.round(1E8*Math.random()).toString(36)),k.type||(k.type=
k.ismethod?"data":f),c.keys[e]=k.key);g[k.key]=k["static"]?b:g.prototype[k.key]=b;c.members[e]=c.members_new[e]=k},m=function(a,b,c){D[a]&&A("naming","duplicate: "+a);q&&w&&(Q(a),"string"!==typeof b&&n("needsParent",a),a.toLowerCase()!==a&&n("needsLowercase",a));switch(typeof c){case "function":var d=c;break;case "object":if(c instanceof Array){var e={};for(d=0;d<c.length;d++)e[d]=e[c[d]]=e[d+""]=d}else e=c;d=function(a){if(void 0!==e[a])return D[b].func(e[a])};break;default:n("paramInvalid",a)}D[a]=
{name:a,parent:b,func:d,enums:e};v[a]=d},Q=function(a){2>a.split(".").length&&A("naming","must prefix "+a);1<a.split(" ").length&&A("naming",a)},L=function(a,b){var c=a.split(">").shift().split("<"),d=c[0];q&&w&&Q(d);G[d]&&A("naming","duplicate: "+a);G[d]={name:d,params:c[1].split(","),func:b}},U=function(a,b,c){switch(b){case "string":if(""!==a)return a;break;case "boolean":return a&&""!==a&&null!==a?!0:!1;case "integer":a=parseInt(a);if(!isNaN(a))return a;break;case "number":if(a=parseFloat(a),
!isNaN(a))return a}n("parameterInvalid",c)},V=function(a){return window[a]||E(a).c},E=function(a){if(t[a])return t[a];var b=function(){return b.prototype.__realconstruct.apply(this,arguments)};b.prototype.__realconstruct=function(){x(a)};u.push(a);return t[a]={c:b,name:a,assembled:!1,declared:!1}},g=function(a){var b=a.split(" : ").join(":").split(":"),c=b[0].split(" "),d=c.pop(),b=b[1],e=[],f=E(d),g=f.c;f.header=a;f.parent=b?E(b):!1;f.declared=!0;f.func=arguments[arguments.length-1];f.includedtypes=
[];f.includes=e;f.keys={};f.members={};f.members_new={};f.members_bykey={};for(var h=0;h<c.length;h++){var l=B[c[h]]||c[h];switch(l){case "abstract":case "singleton":f[l]=!0;break;case "private":f[l]=!0;delete t[d];d=f.name=q?d+"(PRIVATE)":Math.round(1E8*Math.random()).toString(36);t[d]=f;u.pop();u.push(d);break;default:l.length&&M(a)}}f.parent&&(c=f.parent.c,h=c.prototype.__realconstruct,c.prototype.__realconstruct=O,g.prototype=new c,c.prototype.__realconstruct=h);e.push(f.keys);e.push(f.c);f.parent&&
e.push(f.parent.c);for(h=1;h<arguments.length-1;h++)f.includedtypes.push(arguments[h]),e.push(V(arguments[h]));g.prototype.__realconstruct=f["abstract"]?function(){n("abstractInstance",d)}:function(){y(d);this.__construct.apply(this,arguments)};g.__class=d;g.__parent=b;return g},y=function(a){var b=E(a);if(b.assembled)return b;b.assembled=!0;if(!b.declared){var c=a.split(">").shift().split("<");2>c.length?x(a):2<c.length&&M(a);var d=c[0],c=c[1].split(","),e=G[d];e||x(d+" template");e.params.length!==
c.length&&z("parameter",a);for(d=0;d<c.length;d++)c[d]=U(c[d],e.params[d],a);c.unshift(a);e.func.apply({},c);t[a]&&t[a].declared||M(a)}var f=C[a]=b.c,d=b.parent,c=f.prototype,e=b.keys,g=b.members_bykey;if(d){y(d.name);var h=d.c,l;for(l in h.prototype)f[a]=c[l]=h.prototype[l];for(l in d.members)b.members[l]=d.members[l];for(l in d.keys)b.keys[l]=d.keys[l];d.singleton&&(b.singleton=!0);d["private"]&&!b["private"]&&z("privateClass",b.header)}h=b.func.apply({},b.includes)||{};for(l in h)K(l,h[l],b);f.__class=
c.__class=a;f.__parent=c.__parent=d?d.name:!1;c.__construct||(c.__construct=f.__construct=O);for(l in e)g[e[l]]=b.members[l];c.__prop=function(a){return g[a]};c.__get=function(a){return this[a]};c.__set=q?function(d,b){g[d]||x(a+"::"+d);this[d]=p(b,g[d].type)}:function(a,d){this[a]=p(d,g[a].type)};b["abstract"]||(c.__realconstruct=b.singleton?function(){if(!this.__class)return H[a]||J(a,arguments);H[a]&&A("singleton",a);H[a]=this;this.__construct.apply(this,arguments)}:c.__construct);v[a]=function(a){if(a instanceof
f)return a};return b},n=function(a,b){throw Error(a+": "+b);},M=function(a){n("malformed",a)},x=function(a){n("missing",a)},A=function(a,b){n(a+"Violation",b)},z=function(a,b){n(a+"Mismatch",b)};g("Map<data>",function(a,b,c){return{"protected attrs":void 0,"protected type":"data",__construct:function(d){this[a.attrs]={};d&&this.values(d)},convert:function(d,b){return p(d,this[a.type])},each:function(d){var b=this[a.attrs],c;for(c in b)d(c,b[c]);return this},remove:function(d){var b=this[a.attrs],
c=b[d];delete b[d];return c},count:function(){var d=0,b;for(b in this[a.attrs])d++;return d},values:function(d){if(d){for(var b in d)this.set(b,d[b]);return this}var c=this[a.attrs];d={};for(b in c)d[b]=c[b];return d},set:function(b,c){c=this.convert(c);void 0!==c&&(this[a.attrs][b]=c);return this},get:function(b,c){return this[a.attrs][b]||c}}});g("List<data> : Map<data>",function(a,b,c){return{__construct:function(b){this[a.attrs]=[];b&&this.values(b)},each:function(b){for(var d=this[a.attrs],c=
0;c<d.length;c++)b(c,d[c]);return this},count:function(){return this[a.attrs].length},values:function(b){if(b){for(var d=0;d<b.length;d++)this.set(d,b[d]);return this}var c=this[a.attrs];b=[];for(d=0;d<c.length;d++)b.push(c[d]);return b},set:function(a,b){b=this.convert(b);if(void 0===b)return this;if(!(0>a)){if(a===attrs.length-1)return attrs.push(b);if(void 0!==attrs[a])return attrs[a]=b}return this},remove:function(b){var c=this[a.attrs];if(0===b)return c.shift();if(b===c.length-1)return c.pop();
if(void 0!==c[b])return c.splice(b,1).pop()},append:function(b){b=this.convert(b,this[a.attrs].length);void 0!==b&&this[a.attrs].push(b);return this},prepend:function(b){b=this.convert(b,0);void 0!==b&&this[a.attrs].unshift(b);return this}}});(function(){var a="string public protected private static final singleton abstract integer undefined boolean".split(" ");B["void"]="undefined";for(var b=0;b<a.length;b++){var c=a[b].substr(0,3);B[c]=a[b]}})();m("data",!1,function(a){return a});m("scalar","data",
function(a){if(R[typeof a])return a},"");m("string","scalar",function(a){if(a=p(a,"scalar"))return a},"");m("number","scalar",function(a){if(!isNaN(a))return a;a=parseFloat(a);if(!isNaN(a))return a},0);m("integer","number",function(a){a=parseInt(a);if(!isNaN(a))return a});m("boolean","scalar",function(a){return!0===a||!1===a?a:a&&""!==a&&null!==a?!0:!1},!1);m("object","data",function(a){if("object"===typeof a)return a});m("function","data",function(a){if("function"===typeof a)return a});m("class",
"function",function(a){if("function"===typeof a&&a.__class)return a});m("type","string",function(a){if((a=p(a,"string"))&&v[a])return a});m("datatype","type",function(a){if((a=p(a,"string"))&&D[a])return a});m("classtype","type",function(a){if((a=p(a,"string"))&&C[a])return a});L("Map<string>",function(a,b){g(a+" : Map<data>",function(a,d){return{"protected type":b}})});L("List<string>",function(a,b){g(a+" : List<data>",function(a,d){return{"protected type":b}})});P();w=!0;g.template=L;g.datatype=
m;g.cast=p;g.mustCast=function(a,b){var c=p(a,b);void 0===c&&(n("castInvalid",a),c=void 0);return c};g.valid=function(a,b,c){return c?a===p(a,b):a==p(a,b)};g.get=I;g.make=function(a){return J(a,arguments)};g.makeWith=J;g.compile=P;g.classes=function(a){var b={},c;for(c in a)b[c]=I(a[c]);return b};g.config=N;q&&(g.inspect=S);return g}();window.define&&define([],function(){return declarejs});